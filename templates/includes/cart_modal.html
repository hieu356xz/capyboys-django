{% load custom_tags %}

<c-modal id="cart-modal">
  <c-slot name="header">
    <h2 class="text-red-600 uppercase font-semibold text-lg">
      Giỏ hàng của bạn (Đang có {{cart.get_item_count}} sản phẩm)
    </h2>
  </c-slot>
  <c-slot name="body">
    {% if cart.get_item_count %}
    <table class="border-y">
      <thead class="border-b">
        <th></th>
        <th>Sản phẩm</th>
        <th>Đơn giá</th>
        <th>Số lượng</th>
        <th>Thành tiền</th>
        <th></th>
      </thead>
      <tbody>
        {% for item in cart %}
        <tr>
          <td class="p-[6px] min-w-[120px] max-w-[120px]">
            <a href="/products/{{item.slug}}" class="cursor-pointer">
              <img src="{{item.cover_img}}" alt="{{item.title}}" />
            </a>
          </td>
          <td class="p-[6px] w-full">
            <a
              href="/products/{{item.slug}}"
              class="cursor-pointer hover:text-red-600 transition-colors duration-300">
              {{item.title}}
            </a>
          </td>
          <td class="p-[6px] min-w-[100px] font-semibold text-red-600">
            {{item.final_price|floatformat:'0g'}} đ
          </td>
          <td class="p-[6px] min-w-[100px]">{{item.quantity}}</td>
          <td class="p-[6px] min-w-[100px] font-semibold text-red-600">
            {{item.final_price|calc_subtotal:item.quantity}} đ
          </td>
          <td class="p-[6px] min-w-[40px]">
            <a
              href="/"
              class="cursor-pointer hover:text-red-600 transition-colors duration-300">
              <i class="ph-bold ph-trash"></i>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <h1 class="text-center">Giỏ hàng của bạn hiện có sản phẩm nào</h1>
    {% endif %}
  </c-slot>
  <c-slot name="footer">
    <div class="text-right font-semibold">
      <h3>
        Tổng:
        <span class="text-red-600">
          {{cart.get_total_price|floatformat:'0g'}} đ
        </span>
      </h3>
      <a
        href="/"
        class="inline-block mt-4 py-2 px-4 font-semibold bg-red-600 rounded-md text-white cursor-pointer hover:bg-red-700 text-center"
        >Thanh toán</a
      >
    </div>
  </c-slot>
</c-modal>
